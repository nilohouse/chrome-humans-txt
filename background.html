<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function checkForHumansTxt(tabId, changeInfo, tab) {
            if ( changeInfo.url ) {
                console.log("tab updated to "+changeInfo.url);
                
                $.ajax({
                    url: changeInfo.url + "humans.txt",
                    success: function() {
                        chrome.pageAction.setIcon( {path: "48.png", tabId: tab.id} );
                        chrome.pageAction.show(tabId);
                        console.log("OK to humans.txt!");
                    },
                    error: function() {
                        console.log("humans.txt not found");
                    }
                });
            }
        }
    
        chrome.tabs.onUpdated.addListener( checkForHumansTxt );
    </script>
</head>
</html>
